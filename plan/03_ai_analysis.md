# 03. Gemini API による分析・要約モジュール (Step 3)

## 目標
`collector.py` によって収集された大量のニュースデータ（テキストデータ）を Gemini API に入力し、**30枚のスライド**に相当する構造化されたコンテンツ（JSONや指定のMarkdownフォーマット）を生成すること。

## 要件
- `src/analyzer.py` を作成すること。
- `google-generativeai` ライブラリを使用して `gemini-1.5-flash` または `gemini-1.5-pro` モデルを呼び出すこと。
- APIキーは `os.getenv("GEMINI_API_KEY")` で取得すること。
- プロンプトを用いて、情報を以下の5つのセクションに分類・要約させること。
  1. 宇宙政策ニュース
  2. 最新研究内容
  3. ビジネスニュース
  4. 資金調達ニュース
  5. 考察と展望（全体考察・投資家向け）
- AIの出力結果は `data/analyzed_report.json` など機械的に処理しやすい形式（JSON等）で保存すること。

## 重要なプロンプト設計方針

入力データが多岐にわたるため、以下のプロンプト戦略を採用すること。

1. **System Instruction の設定**:
   - 行動規範: 「あなたは世界最高の宇宙ビジネスアナリストです。提供された生データを分析し、エグゼクティブや投資家向けに毎週の宇宙ビジネス動向レポートをスライド形式で出力します。」
   - フォーマット指定: 最終的にスライド化するため、1ページ（スライド1枚）あたりの文字数や箇条書きのフォーマットを厳密に指示すること。

2. **チャンク分割（長文テキスト対策）**:
   - 収集したニューステキストが多すぎる場合、Geminiのトークン上限を超える、または精度が落ちる可能性がある。
   - そのため、一度に全てのニュースを渡すのではなく、カテゴリごと（政策、研究、ビジネス等）に分けてAPI呼び出しを行い、要約データを結合するアプローチを検討すること。

3. **出力フォーマット（JSON Schema）の指定（推奨）**:
   - 後続のスライド生成（Step 4）を安定させるため、Geminiの出力は Markdown よりも **JSON 形式**を強制（`response_mime_type="application/json"`）することを強く推奨する。
   - 例: `[{"slide_number": 1, "title": "...", "content": ["...", "..."], "source": "url..."}, ...]`
